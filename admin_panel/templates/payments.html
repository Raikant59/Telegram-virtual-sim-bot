{% extends "base.html" %}
{% block title %}Payments Settings{% endblock %}
{% block content %}
<style>
  header {
    background: linear-gradient(135deg,#16a085,#2ecc71);
    color: #fff;
    padding: 16px;
    border-radius: 12px;
    margin-bottom: 18px;
    text-align: center; /* center header text */
  }

  .grid {
    display: grid;
    gap: 18px;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); /* allow smaller min width */
  }

  .card {
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 4px 12px rgba(0,0,0,.08);
    padding: 16px;
  }

  .card h3 {
    margin: 0 0 12px;
    font-size: 1.1rem;
  }

  label {
    font-weight: 600;
    margin: 8px 0 6px;
    display: block;
    font-size: 0.95rem;
  }

  input, select {
    width: 100%;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #fafafa;
    font-size: 0.95rem;
  }

  .switch {
    display: flex;
    gap: 10px;
    align-items: center;
    margin: 10px 0;
    font-size: 0.95rem;
  }

  .save {
    background: #2ecc71;
    border: none;
    color: #fff;
    padding: 12px 14px;
    border-radius: 10px;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
  }

  /* Responsive fixes */
  @media (max-width: 768px) {
    header h2 {
      font-size: 1.3rem;
    }
    .card h3 {
      font-size: 1rem;
    }
    label, input, select, .switch {
      font-size: 0.9rem;
    }
    .save {
      width: 100%; /* full width save button on small screens */
    }
  }

  @media (max-width: 480px) {
    .grid {
      grid-template-columns: 1fr; /* single column layout */
    }
    header h2 {
      font-size: 1.1rem;
    }
    input, select {
      font-size: 0.85rem;
      padding: 8px;
    }
  }

  /* Prevent overlap of close button & menu */
  .close-btn {
    position: relative;
    z-index: 2000; /* higher than navbar/menu */
  }
</style>

<header><h2>ðŸ’³ Payment Gateways</h2></header>

<form method="POST">
  <div class="grid">
    <div class="card">
      <h3>General</h3>
      <div class="switch">
        <input type="checkbox" name="enable_manual" id="enable_manual" {% if cfg.enable_manual %}checked{% endif %}>
        <label for="enable_manual">Enable Manual (UPI/QR)</label>
      </div>
      <div class="switch">
        <input type="checkbox" name="enable_crypto" id="enable_crypto" {% if cfg.enable_crypto %}checked{% endif %}>
        <label for="enable_crypto">Enable Crypto</label>
      </div>
      <div class="switch">
        <input type="checkbox" name="enable_bharatpay" id="enable_bharatpay" {% if cfg.enable_bharatpay %}checked{% endif %}>
        <label for="enable_bharatpay">Enable BharatPay</label>
      </div>
      <label>Min Recharge Amount</label>
      <input type="number" step="0.01" name="min_amount" value="{{ cfg.min_amount }}">
    </div>

    <div class="card">
      <h3>Manual / UPI</h3>
      <label>UPI ID</label><input name="manual_upi_id" value="{{ cfg.manual_upi_id }}">
      <label>QR Image URL</label><input name="manual_qr_url" value="{{ cfg.manual_qr_url }}">
    </div>

    <div class="card">
      <h3>Crypto</h3>
      <label>Provider</label>
      <select name="crypto_provider">
        <option {% if cfg.crypto_provider=='custom' %}selected{% endif %}>custom</option>
        <option {% if cfg.crypto_provider=='coinbase' %}selected{% endif %}>coinbase</option>
        <option {% if cfg.crypto_provider=='nowpayments' %}selected{% endif %}>nowpayments</option>
      </select>
      <label>API Key</label><input name="crypto_api_key" value="{{ cfg.crypto_api_key }}">
      <label>Create Invoice URL (POST)</label><input name="crypto_create_invoice_url" value="{{ cfg.crypto_create_invoice_url }}">
      <label>Webhook Secret</label><input name="crypto_webhook_secret" value="{{ cfg.crypto_webhook_secret }}">
      <label>Wallet/Account ID</label><input name="crypto_wallet_or_account" value="{{ cfg.crypto_wallet_or_account }}">
    </div>

    <div class="card">
      <h3>BharatPay</h3>
      <label>Merchant ID</label><input name="bharatpay_merchant_id" value="{{ cfg.bharatpay_merchant_id }}">
      <label>API Key</label><input name="bharatpay_api_key" value="{{ cfg.bharatpay_api_key }}">
      <label>Create Order URL (POST)</label><input name="bharatpay_create_order_url" value="{{ cfg.bharatpay_create_order_url }}">
      <label>Webhook Secret</label><input name="bharatpay_webhook_secret" value="{{ cfg.bharatpay_webhook_secret }}">
      <label>UPI ID (optional)</label><input name="bharatpay_upi_id" value="{{ cfg.bharatpay_upi_id }}">
    </div>
  </div>
  <p><button class="save" type="submit">ðŸ’¾ Save Settings</button></p>
</form>
{% endblock %}
